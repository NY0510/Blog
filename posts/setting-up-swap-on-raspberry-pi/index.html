<!DOCTYPE html>
<html lang="ko">
	<head>
	<meta charset="UTF-8" />
	<meta http-equiv="X-UA-Compatible" content="IE=edge" />
	<meta name="viewport" content="width=device-width, initial-scale=1" />
	<link rel="shortcut icon" href="https://blog.ny64.kr/favicon.ico" type="image/x-icon" />
	<link rel="icon" href="https://blog.ny64.kr/favicon.ico" type="image/x-icon" />
	<title>[RPI] Swap 설정하기 - NY64의 무한삽질 블로그</title>

	<!-- Meta -->
	<meta http-equiv="Title" content="[RPI] Swap 설정하기 | NY64의 무한삽질 블로그" />
	<meta property="og:title" content="[RPI] Swap 설정하기 | NY64의 무한삽질 블로그" />
	<meta property="og:locale" content="ko_KR" />
	<meta name="description" content="메모리가 부족하다면 디스크를 메모리처럼 사용하자" />
	<meta property="og:description" content="메모리가 부족하다면 디스크를 메모리처럼 사용하자" />
	<link rel="canonical" href="https://blog.ny64.kr/posts/setting-up-swap-on-raspberry-pi/" />
	<meta property="og:url" content="https://blog.ny64.kr/posts/setting-up-swap-on-raspberry-pi/" />
	<meta property="og:site_name" content="NY64의 무한삽질 블로그" />
	<meta name="twitter:card" content="summary" />
	<meta property="twitter:title" content="[RPI] Swap 설정하기 | NY64의 무한삽질 블로그" />
	<meta property="og:type" content="blog" />
	<meta http-equiv="Author" content="NY0510" />
	<meta property="og:author" content="NY0510" />
	<meta http-equiv="Publisher" content="NY0510" />

	<!-- 포스트 설정에 image 있으면 미리보기 이미지로 설정하고 없으면 기본 이미지로 -->
	
	<meta property="og:image" content="https://blog.ny64.kr/assets/images/og/background.png" />
	<meta name="twitter:card" content="https://blog.ny64.kr/assets/images/og/background.png" />
	
	<!-- <meta name="theme-color" content="#2DFF14" /> -->

	<!-- CSS -->
	<link rel="stylesheet" href="https://blog.ny64.kr/assets/css/main.css" type="text/css" />

	<!-- Font -->
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" />
	<link rel="stylesheet" href="https://fonts.googleapis.com/earlyaccess/notosanskr.css" />
	<link href="https://cdn.jsdelivr.net/gh/joungkyun/font-d2coding/d2coding.css" rel="stylesheet" type="text/css" />
	<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/gh/orioncactus/pretendard/dist/web/static/pretendard.css" />

	<link rel="alternate" type="application/rss+xml" title="RSS Feed for NY64의 무한삽질 블로그" href="/feed.xml" />

	
<script async src="https://www.googletagmanager.com/gtag/js?id=G-S51V5E7PLR"></script>
<script>
	window.dataLayer = window.dataLayer || [];
	function gtag() {
		dataLayer.push(arguments);
	}
	gtag("js", new Date());

	gtag("config", "G-S51V5E7PLR");
</script>


</head>

	<body>
		<div class="content-container"><script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
<script type="text/javascript" src="https://rawcdn.githack.com/mburakerman/prognroll/0feda211643153bce2c69de32ea1b39cdc64ffbe/src/prognroll.js"></script>
<script type="text/javascript">
	$(function () {
		// height: 4,
		$("body").prognroll({ color: "#555" });
		// $(".content-container").prognroll({ custom: true });
	});
</script>

<header>
	<div class="header-small">
		<a href="https://blog.ny64.kr">NY64의 무한삽질 블로그</a>
	</div>
</header>
<div class="post">
	<div class="post-title">[RPI] Swap 설정하기</div>
	<span class="post-date">
		<time>24 Jul 2021</time>
	</span>
	<div class="post-tag">
		<ul>
			
			<li>
				<a href="https://blog.ny64.kr/tags#Raspberry PI">
					<span>Raspberry PI</span>
				</a>
			</li>

			 
			<li>
				<a href="https://blog.ny64.kr/tags#Swap">
					<span>Swap</span>
				</a>
			</li>

			 
			<a href="https://hits.seeyoufarm.com">
				<style>
					.hits {
						width: auto;
						height: auto;
						max-width: 110px;
						max-height: 25px;
					}
				</style>
				<img
					class="hits"
					src="https://hits.seeyoufarm.com/api/count/incr/badge.svg?url=https%3A%2F%2Fblog.ny64.kr&count_bg=%23434343&title_bg=%237C7C7C&icon=checkmarx.svg&icon_color=%23FFFFFF&title=%EB%B0%A9%EB%AC%B8%EC%88%98&edge_flat=false"
				/>
			</a>
		</ul>
	</div>

	<p>이번 포스트에서는 라즈베리파이에 Swap 설정을 해보겠습니다.</p>

<h2 id="swap">Swap?</h2>

<p>메모리가 부족한 경우 메모리의 일부 내용을 디스크로 Swap 하는 것을 말합니다.</p>

<p><strong>Windows</strong>의 가상 메모리와 같이 디스크 일부를 메모리처럼 사용하게 됩니다.</p>

<p><br /></p>

<h2 id="스왑-파일파티션-존재-여부-화인">스왑 파일/파티션 존재 여부 화인</h2>

<p>스왑 파일을 생성하기 전에 이미 스왑 파일이나 파티션이 있는지 먼저 확인합니다.</p>

<p>아래 두 명령어를 입력했을때 <strong>Swap관련 내용</strong>이 보이지 않으면 스왑이 설정되지 않은 것 입니다</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>free <span class="nt">-m</span>
<span class="nb">sudo </span>swapon <span class="nt">-s</span>
</code></pre></div></div>

<p><br /></p>

<h2 id="스왑-파일-생성">스왑 파일 생성</h2>

<p>스왑 파일 및 파티션이 존재하지 않는 것을 확인한 뒤 아래 명령어로 스왑 용도로 사용할 파일을 생성합니다</p>

<p>아래 명령어는 루트 디렉터리에 <strong>4GB</strong>의 파일을 생성한다는 뜻입니다.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>fallocate <span class="nt">-l</span> 4G /swapfile
</code></pre></div></div>

<p><br /></p>

<p>아래와 같이 <strong>4GB</strong>의 <code class="language-plaintext highlighter-rouge">swapfile</code>이 생성된 것을 확인할 수 있습니다.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>NY@RPI:~<span class="nv">$ </span><span class="nb">ls</span> <span class="nt">-al</span> /
total 4194532
...
drwxr-xr-x   9 root root       4096 Jul  3 20:24 snap
drwxr-xr-x   2 root root       4096 Feb  1 20:02 srv
<span class="nt">-rw-------</span>   1 root root 4294967296 Jun  2 17:55 swapfile
dr-xr-xr-x  12 root root          0 Jan  1  1970 sys
...
</code></pre></div></div>

<p><br /></p>

<h2 id="스왑-활성화">스왑 활성화</h2>

<p>이제 생성한 파일을 스왑으로 동작하도록 설정해 줘야 합니다.</p>

<p>생성된 파일의 권한을 수정합니다.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo chmod </span>600 /swapfile
</code></pre></div></div>

<p><br /></p>

<p>해당 파일이 스왑으로 동작하도록 설정합니다.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>mkswap /swapfile
</code></pre></div></div>

<p><br /></p>

<p>마지막으로 아래 명령어를 입력해서 스왑을 활성화해줍니다.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>swapon /swapfile
</code></pre></div></div>

<p><br /></p>

<p>라즈베리파이를 재부팅 해도 계속 사용하기 위해서 <code class="language-plaintext highlighter-rouge">/etc/fstab</code>를 수정해 줍시다.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>nano /etc/fstab
</code></pre></div></div>

<p><br /></p>

<p>그리고 제일 하단에 아래와 같이 한 줄을 추가합니다.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>/swapfile swap swap defaults 0 0
</code></pre></div></div>

<p><br /></p>

<h2 id="스왑-파일-삭제">스왑 파일 삭제</h2>

<p>스왑 파일은 삭제하려면, 아래 명령어로 먼저 스왑을 비활성화합니다.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>swapoff <span class="nt">-v</span> /swapfile
</code></pre></div></div>

<p><br /></p>

<p>스왑 파일을 생성할때 <code class="language-plaintext highlighter-rouge">/etc/fstab</code>에 추가한 내용을 삭제합니다.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>nano /etc/fstab
</code></pre></div></div>

<p><br /></p>

<p>아래의 라인을 삭제해줍니다.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>/swapfile swap swap defaults 0 0
</code></pre></div></div>

<p><br /></p>

<p>마지막으로 생성했던 <code class="language-plaintext highlighter-rouge">swapfile</code>을 삭제해주면 됩니다.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo rm</span> /swapfile
</code></pre></div></div>


	<br /><br />
	<!-- Ad -->
	<script>
	if (window.matchMedia("( min-width: 1024px )").matches == true) {
		document.write(
			'<ins class="kakao_ad_area" style="display:none;" data-ad-unit="DAN-BGxutzmFIQKTCsBJ" data-ad-width="728" data-ad-height="90"></ins><script type="text/javascript" src="//t1.daumcdn.net/kas/static/ba.min.js" async><\/script>'
		);
	}
	if (window.matchMedia("( max-width: 768px )").matches == true) {
		document.write(
			'<ins class="kakao_ad_area" style="display:none;" data-ad-unit="DAN-ZqpdeoPqvpUg8nO4"" data-ad-width="300" data-ad-height="250"></ins><script type="text/javascript" src="//t1.daumcdn.net/kas/static/ba.min.js" async><\/script>'
		);
	}
</script>


	<!-- Comment -->
	
	<div class="post-comment">
		<section id="comment_thread"></section>
		<script src="https://utteranc.es/client.js" repo="NY0510/Blog-Comment" issue-term="title" label="Comment" theme="github-light" crossorigin="anonymous" async></script>

	</div>
	
</div>
 <!-- Documents about icons are here: http://fontawesome.io/icons/ -->
<link href="https://rawcdn.githack.com/hung1001/font-awesome-pro/0ac23ca/css/all.css" rel="stylesheet" type="text/css" />
<div class="footer">
	<hr />
	<div class="footer-link">
		  
		<a href="https://discord.com/users/690148325604720660"><i class="fab fa-discord" aria-hidden="true"></i></a>
		 
		<a href="https://www.youtube.com/channel/UCbPHBnYHcUYcWfpIEtn60WA"><i class="fab fa-youtube" aria-hidden="true"></i></a>
		  
		<a href="https://github.com/NY0510"><i class="fab fa-github" aria-hidden="true"></i></a>
		          
		<a href="mailto:me@ny64.kr"><i class="fa fa-envelope" aria-hidden="true"></i></a>
		
	</div>
	© 2021 NY64. All rights reserved.
</div>
</div>
	</body>
</html>
